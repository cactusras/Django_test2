<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>診所登入（管理）</title>
    
    <link rel="icon" type="image/x-icon" href="{% static 'myApp/assets/favicon.ico' %}" /> 
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" /> 
    <link href="{% static 'css/styles.css' %}" rel="stylesheet" /> 

    <!-- <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
    <link href="css/styles.css" rel="stylesheet" /> -->
    
</head>

<body>
    <!--網頁頭-->
    <nav class="navbar navbar-expand-lg" style="background-color:#F0EAD6; height: 100px;">
        <div class="container px-4 px-lg-5">
            <img src="{% static 'assets/dental.png' %}" alt="DEN Logo">
            <a class="navbar-brand" href="#!" style="font-size: 24px;">牙醫預約平台</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <div class="ms-auto">
                    <button class="btn btn-outline-dark" type="button" style="font-size: 20px;">
                        <i class="bi bi-person-fill"></i>
                        登入
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <section class="py-5"  style="background-color:#FFFFF4">
        <div class="container" style="border: 1px solid #F0EAD6;">
            <div class="row row-cols-1">
                <div class="col d-flex align-items-center justify-content-center" style="background-color:#F0EAD6; border: 1px solid #ada089; height:80px; font-size: 20px; ">
                    管理新增醫師
                </div>
    
                <div class="col" style="background-color:#fffff0; border: 1px solid #ada089; height:520px; font-size: 20px; overflow: auto;">
                    <table class="table table-hover" id="doctorTable">
                        <br>
                        <thead>
                            <tr>
                                <th scope="col">醫師</th>
                                <th scope="col">專長</th>
                                <th scope="col">電話</th>
                                <th scope="col">時刻表編輯</th>
                                <th scope="col">刪除</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>A</td>
                                <td>A</td>
                                <td>A</td>
                                <td>A</td>
                                <td>
                                    <div>
                                        <input class="form-check-input" type="checkbox" value="" aria-label="..." onchange="toggleDeleteButton()">
                                    </div>
                                </td> 
                            </tr>

                            <tr>
                                <td>B</td>
                                <td>B</td>
                                <td>B</td>
                                <td>B</td>
                                <td>
                                    <div>
                                        <input class="form-check-input" type="checkbox" value="" aria-label="..." onchange="toggleDeleteButton()">
                                    </div>
                                </td> 
                            </tr>
                            <tr>
                                <td>C</td>
                                <td>C</td>
                                <td>C</td>
                                <td>C</td>
                                <td>
                                    <div>
                                        <input class="form-check-input" type="checkbox" value="" aria-label="..." onchange="toggleDeleteButton()">
                                    </div>
                                </td> 
                            </tr>
                            <tr>
                                <td>D</td>
                                <td>D</td>
                                <td>D</td>
                                <td>D</td>
                                <td>
                                    <div>
                                        <input class="form-check-input" type="checkbox" value="" aria-label="..." onchange="toggleDeleteButton()">
                                    </div>
                                </td> 
                            </tr>
                            <tr>
                                <td>E</td>
                                <td>E</td>
                                <td>E</td>
                                <td>E</td>
                                <td>
                                    <div>
                                        <input class="form-check-input" type="checkbox" value="" aria-label="..." onchange="toggleDeleteButton()">
                                    </div>
                                </td> 
                            </tr>
                            <tr>
                                <td>F</td>
                                <td>F</td>
                                <td>F</td>
                                <td>F</td>
                                <td>
                                    <div>
                                        <input class="form-check-input" type="checkbox" value="" aria-label="..." onchange="toggleDeleteButton()">
                                    </div>
                                </td> 
                            </tr>
                            <tr>
                                <td>G</td>
                                <td>G</td>
                                <td>G</td>
                                <td>G</td>
                                <td>
                                    <div>
                                        <input class="form-check-input" type="checkbox" value="" aria-label="..." onchange="toggleDeleteButton()">
                                    </div>
                                </td> 
                            </tr>
                            <tr>
                                <td>H</td>
                                <td>H</td>
                                <td>H</td>
                                <td>H</td>
                                <td>
                                    <div>
                                        <input class="form-check-input" type="checkbox" value="" aria-label="..." onchange="toggleDeleteButton()">
                                    </div>
                                </td> 
                            </tr>

                        </tbody>
                    </table>
                </table>
                <div style="text-align: right; margin-right: 10px;">
                    <button class="btn btn-outline-dark" type="button" data-bs-toggle="modal" data-bs-target="#staticBackdrop" style="font-size: 20px; width: 160px; height: 40px;">
                        <i class="bi bi-calendar2-plus-fill"></i>
                        新增
                    </button>
                    <!--時段按鈕的彈跳視窗-->
                    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="staticBackdropLabel">編輯時段</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body text-start">
                                    <form id="doctorForm">
                                        <div class="mb-3">
                                            <label for="doctorName" class="form-label">醫師：</label>
                                            <input type="text" class="form-control" id="doctorName" required style="width: 200px;">
                                        </div>
                                        <div class="mb-3">
                                            <label for="specialty" class="form-label">專長：</label>
                                            <input type="text" class="form-control" id="specialty" required style="width: 200px;">
                                        </div>
                                        <div class="mb-3">
                                            <label for="phone" class="form-label">電話：</label>
                                            <input type="tel" class="form-control" id="phone" required style="width: 200px;">
                                        </div>
                                        <div class="mb-3">
                                            <label for="schedule" class="form-label">時刻表編輯：</label>
                                            <input type="text" class="form-control" id="schedule" required style="width: 200px;">
                                        </div>
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-primary" id="addTimeSlot" data-bs-dismiss="modal">新增</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-outline-dark" type="button" onclick="deleteCheckedRows()" id="deleteButton" style="font-size: 20px; width: 160px; height: 40px;" data-bs-toggle="modal" data-bs-target="#exampleModal">
                        <i class="bi bi-calendar-check-fill"></i>
                        完成
                    </button>

                    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">更新通知</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body align-items-center" style="text-align: center;">
                                    已刪除並更新
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>                    
                </div>
            </div>
        </div>
    </div>
</section>
<!--頁面底-->
<footer class="py-5 bg-dark">
    <div class="container"><p class="m-0 text-center text-white">Copyright &copy; Your Website 2023</p></div>
</footer>
<!-- Bootstrap core JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme JS-->
<script src="{% static 'js/scripts.js' %}"></script>

<script>
    document.getElementById('addTimeSlot').addEventListener('click', function() {
        const doctorName = document.getElementById('doctorName').value;
        const specialty = document.getElementById('specialty').value;
        const phone = document.getElementById('phone').value;
        const schedule = document.getElementById('schedule').value;

        if (doctorName && specialty && phone && schedule) {
            const table = document.getElementById('doctorTable').getElementsByTagName('tbody')[0];
            const newRow = table.insertRow();
            
            newRow.innerHTML = `
                <td>${doctorName}</td>
                <td>${specialty}</td>
                <td>${phone}</td>
                <td>${schedule}</td>
                <td>
                    <div>
                        <input class="form-check-input" type="checkbox" value="" aria-label="..." onchange="toggleDeleteButton()">
                    </div>
                </td>
            `;

            // Clear the form fields
            document.getElementById('doctorForm').reset();
        }
    });

    function deleteCheckedRows() {
        const table = document.getElementById('doctorTable').getElementsByTagName('tbody')[0];
        const rows = table.getElementsByTagName('tr');
        for (let i = rows.length - 1; i >= 0; i--) {
            const checkbox = rows[i].getElementsByTagName('input')[0];
            if (checkbox.checked) {
                table.deleteRow(i);
            }
        }
    }

    function toggleDeleteButton() {
        const table = document.getElementById('doctorTable').getElementsByTagName('tbody')[0];
        const rows = table.getElementsByTagName('tr');
        let anyChecked = false;
        for (const row of rows) {
            const checkbox = row.getElementsByTagName('input')[0];
            if (checkbox.checked) {
                anyChecked = true;
                break;
            }
        }
        document.getElementById('deleteButton').disabled = !anyChecked;
    }
</script>
</body>
</html>
